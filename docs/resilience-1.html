<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 11 Resilience 1 | Data Skills</title>
<meta name="author" content="Emily Nordmann">
<meta name="description" content="11.1 Intended Learning Outcomes By the end of this chapter you should be able to: Explain what resilience is Create new variables using case_when() and mutate() Convert variables to different data...">
<meta name="generator" content="bookdown 0.34 with bs4_book()">
<meta property="og:title" content="Chapter 11 Resilience 1 | Data Skills">
<meta property="og:type" content="book">
<meta property="og:url" content="https://psyteachr.github.io/data-skills-v2/resilience-1.html">
<meta property="og:image" content="https://psyteachr.github.io/data-skills-v2/images/logos/logo.png">
<meta property="og:description" content="11.1 Intended Learning Outcomes By the end of this chapter you should be able to: Explain what resilience is Create new variables using case_when() and mutate() Convert variables to different data...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 11 Resilience 1 | Data Skills">
<meta name="twitter:description" content="11.1 Intended Learning Outcomes By the end of this chapter you should be able to: Explain what resilience is Create new variables using case_when() and mutate() Convert variables to different data...">
<meta name="twitter:image" content="https://psyteachr.github.io/data-skills-v2/images/logos/logo.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.0/transition.js"></script><script src="libs/bs3compat-0.5.0/tabs.js"></script><script src="libs/bs3compat-0.5.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6NP3MF25W3');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="include/psyteachr.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Data Skills</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Overview</a></li>
<li><a class="" href="sec-intro.html"><span class="header-section-number">1</span> Intro to R and RStudio</a></li>
<li><a class="" href="stroop.html"><span class="header-section-number">2</span> Stroop 1</a></li>
<li><a class="" href="stroop-2.html"><span class="header-section-number">3</span> Stroop 2</a></li>
<li><a class="" href="homework-1.html"><span class="header-section-number">4</span> Homework 1</a></li>
<li><a class="" href="corsi-blocks-1.html"><span class="header-section-number">5</span> Corsi Blocks 1</a></li>
<li><a class="" href="corsi-blocks-2.html"><span class="header-section-number">6</span> Corsi Blocks 2</a></li>
<li><a class="" href="belonging-1.html"><span class="header-section-number">7</span> Belonging 1</a></li>
<li><a class="" href="belonging-2.html"><span class="header-section-number">8</span> Belonging 2</a></li>
<li><a class="" href="big-five-personality-1.html"><span class="header-section-number">9</span> Big five personality 1</a></li>
<li><a class="" href="big-five-personality-2.html"><span class="header-section-number">10</span> Big five personality 2</a></li>
<li><a class="active" href="resilience-1.html"><span class="header-section-number">11</span> Resilience 1</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="installing-r.html"><span class="header-section-number">A</span> Installing R</a></li>
<li><a class="" href="symbols.html"><span class="header-section-number">B</span> Symbols</a></li>
<li><a class="" href="conventions.html"><span class="header-section-number">C</span> Conventions</a></li>
<li><a class="" href="server-troubleshooting.html"><span class="header-section-number">D</span> Server troubleshooting</a></li>
<li><a class="" href="license.html">License</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/psyteachr/data-skills-v2">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="resilience-1" class="section level1" number="11">
<h1>
<span class="header-section-number">11</span> Resilience 1<a class="anchor" aria-label="anchor" href="#resilience-1"><i class="fas fa-link"></i></a>
</h1>
<div id="sec-ilo-resil1" class="section level2" number="11.1">
<h2>
<span class="header-section-number">11.1</span> Intended Learning Outcomes<a class="anchor" aria-label="anchor" href="#sec-ilo-resil1"><i class="fas fa-link"></i></a>
</h2>
<p>By the end of this chapter you should be able to:</p>
<ul>
<li>Explain what resilience is</li>
<li>Create new variables using <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>
</li>
<li>Convert variables to different data types using <code><a href="https://rdrr.io/r/base/factor.html">as.factor()</a></code> and <code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code>
</li>
</ul>
</div>
<div id="activity-1-resilience" class="section level2" number="11.2">
<h2>
<span class="header-section-number">11.2</span> Activity 1: Resilience<a class="anchor" aria-label="anchor" href="#activity-1-resilience"><i class="fas fa-link"></i></a>
</h2>
<p>For the next set of chapters we're going to use data from a measurement of resilience.</p>
<ul>
<li>First, take part in <a href="https://www.psytoolkit.org/cgi-bin/3.4.4/survey?s=LOYSJ">this online version</a> of the Brief Resilience Coping Scale by Sinclair and Wallston (2004).</li>
<li>Second, read the <a href="https://en.wikipedia.org/wiki/Psychological_resilience#">Wikipedia entry</a> on resilience. It's quite long so you don't have to read the entire thint (although feel free if you're interested), the main sections to focus on are Overview, Process, and Developing and Sustaining Resilience.</li>
<li>Finally, answer the following questions. Please note that your responses will not save in the browser - if you want to save them, make a note of them somewhere.</li>
</ul>
<ol style="list-style-type: decimal">
<li>Which of these is a strategy suggested to enhance resilience? <code>r(c(answer = " Cognitive-behavioral techniques", "Avoidance of stress", "Emotional suppression", "Increased dependency"))</code>
</li>
</ol>
<p>2.Psychological resilience is mainly characterized as a: <select class="webex-select"><option value="blank"></option>
<option value="">Permanent trait</option>
<option value="">Singular event</option>
<option value="answer">Process</option>
<option value="">Fixed state</option></select></p>
<ol start="3" style="list-style-type: decimal">
<li><p>Resilient individuals do not experience any increase in stress in response to stressors. <select class="webex-select"><option value="blank"></option>
<option value="">True</option>
<option value="answer">False</option></select></p></li>
<li><p>Social support systems are considered external factors influencing a person's level of resilience. <select class="webex-select"><option value="blank"></option>
<option value="answer">True</option>
<option value="">False</option></select></p></li>
<li><p>The presence of stress in life is necessary for the practice and development of resilience. <select class="webex-select"><option value="blank"></option>
<option value="answer">True</option>
<option value="">False</option></select></p></li>
</ol>
<div class="webex-solution">
<button>
Explain these answers
</button>
<ol style="list-style-type: decimal">
<li><p>Cognitive-behavioral techniques are suggested for enhancing resilience because they involve actively changing thought patterns and behaviors to foster a more adaptive response to stress.</p></li>
<li><p>Psychological resilience is termed a "Process" because it is seen as a dynamic set of interactions between a person and their environment, which can be developed over time.</p></li>
<li><p>The statement is "False" because resilient individuals do experience stress; however, they generally manage to return to baseline stress levels more effectively than less resilient individuals.</p></li>
<li><p>"True", social support systems are external factors that contribute to a person's resilience by providing emotional and practical resources during times of stress.</p></li>
<li><p>"True", the presence of stress provides individuals with opportunities to practice resilience, although the optimal level of stress for this purpose varies among individuals.</p></li>
</ol>
</div>
</div>
<div id="sec-new-project-resil" class="section level2" number="11.3">
<h2>
<span class="header-section-number">11.3</span> Activity 2: New project<a class="anchor" aria-label="anchor" href="#sec-new-project-resil"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Log in to the to R sever and make a new project for the Resilience chapters (this week and next week).</li>
<li>If you've decided to install R on your machine, create a new project by clicking <code>File -&gt; New Project</code>. The rest of the process is the same as on the server.</li>
<li>Create a new Markdown document named "Resilience 1". Delete the default text and then create a new code chunk.</li>
<li>Your environment should be clear but if there are objects in it, remove them by pressing the brush icon.</li>
</ul>
</div>
<div id="sec-data-resil" class="section level2" number="11.4">
<h2>
<span class="header-section-number">11.4</span> Activity 3: Data files<a class="anchor" aria-label="anchor" href="#sec-data-resil"><i class="fas fa-link"></i></a>
</h2>
<p>Once you've done all this, it's time to download the files we need and then upload them to the server.</p>
<ul>
<li>First, download the <a href="data/resilience/resilience_data.zip" download>Resilience data zip file</a> to your computer and make sure you know which folder you saved it in.</li>
<li>Then, on the server in the Files tab (bottom right), click <code>Upload &gt; Choose file</code> then navigate to the folder on your computer where the zip file is saved, select it, click <code>Open</code>, then <code>OK</code>.</li>
<li>If you're working on your own machine, you will need to unzip the files before you can use them. There is a short walkthrough via YouTube for how to do this on <a href="https://www.youtube.com/watch?v=r9hpiyzOOTY">Windows</a> and <a href="https://www.youtube.com/watch?v=PGp1daVIBcs">Mac</a>. You need to unzip the files into your project folder. If you need help with this, come to office hours or a GTA session.</li>
</ul>
<p>The data we're working with is simulated data for an experiment where people have completed a resilience questionnaire and also take part in treatment condition. They either are in the control group where they are asked to do a colouring book every night, or they're in an intervention group where they're asked to complete CBT exercises every night. There are 890 participants in total.</p>
<p>The zip file contains three files:</p>
<ul>
<li>
<code>demographic_data</code> contains the participant ID, age, gender, and treatment condition (1 = control, 2 = intervention).</li>
<li>
<code>questionnaire_data</code> contains the participant ID and then their responses to each question on the Brief Resilence Scale.</li>
<li>
<code>scoring.csv</code> contains the scoring information for the questionnaire as some of the items are reverse-scored (also known as backward scoring).</li>
</ul>
<p>Is <code>demographic_data</code> in wide-form or long-form? <select class="webex-select"><option value="blank"></option>
<option value="answer">wide-form</option>
<option value="">long-form</option></select>
Is <code>questionnaire_data</code> in wide-form or long-form? <select class="webex-select"><option value="blank"></option>
<option value="answer">wide-form</option>
<option value="">long-form</option></select></p>
<div class="webex-solution">
<button>
Explain these answers
</button>
<p>They're both in wide-form at the moment because each dataset has a single row for each participant, with multiple columns for each bit of information.</p>
</div>
</div>
<div id="activity-4-loading-the-data" class="section level2" number="11.5">
<h2>
<span class="header-section-number">11.5</span> Activity 4: Loading the data<a class="anchor" aria-label="anchor" href="#activity-4-loading-the-data"><i class="fas fa-link"></i></a>
</h2>
<p>In code chunk 1, write and run the code that:</p>
<ul>
<li>Loads the <code class="package">tidyverse</code>.</li>
<li>Uses <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> to load <code>demographic_data.csv</code> into an object named <code>demo_data</code>.</li>
<li>Loads <code>questionnaire_data.csv</code> into an object named <code>q_data</code>.</li>
<li>Loads <code>scoring.csv</code> into an object named <code>scoring</code>
</li>
</ul>
<div class="webex-solution">
<button>
Hint
</button>
<div class="sourceCode" id="cb141"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">package_name</span><span class="op">)</span></span>
<span><span class="va">object_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"file_name.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb142"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="va">demo_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"demographic_data.csv"</span><span class="op">)</span></span>
<span><span class="va">q_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"questionnaire_data.csv"</span><span class="op">)</span></span>
<span><span class="va">scoring</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"scoring.csv"</span><span class="op">)</span></span></code></pre></div>
<p><code>r unhide()</code></p>
</div>
<div id="activity-5-check-the-data" class="section level2" number="11.6">
<h2>
<span class="header-section-number">11.6</span> Activity 5: Check the data<a class="anchor" aria-label="anchor" href="#activity-5-check-the-data"><i class="fas fa-link"></i></a>
</h2>
<p>As always, your first step should be to check the data. Run <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> and <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> on both <code>demo_data</code> and <code>q_data</code> and answer the following questions:</p>
<ul>
<li>What type of data is <code>gender</code> stored as? <select class="webex-select"><option value="blank"></option>
<option value="answer">character</option>
<option value="">numeric</option>
<option value="">factor</option></select>
</li>
<li>What type of data is <code>treatment</code> stored as? <select class="webex-select"><option value="blank"></option>
<option value="">character</option>
<option value="answer">numeric</option>
<option value="">factor</option></select>
</li>
<li>What type of data is <code>participant_ID</code> stored as? <select class="webex-select"><option value="blank"></option>
<option value="">character</option>
<option value="answer">numeric</option>
<option value="">factor</option></select>
</li>
<li>How many missing data points does <code>bounce_back_quickly</code> have (these are coded as <code>NA</code>)? <input class="webex-solveme nospaces" size="2" data-answer='["44"]'>
</li>
<li>How many missing data points does <code>age</code> have? <input class="webex-solveme nospaces" size="1" data-answer='["8"]'>
</li>
</ul>
</div>
<div id="activity-6-convert-data-types" class="section level2" number="11.7">
<h2>
<span class="header-section-number">11.7</span> Activity 6: Convert data types<a class="anchor" aria-label="anchor" href="#activity-6-convert-data-types"><i class="fas fa-link"></i></a>
</h2>
<p>A useful next step with data processing is to fix any data types as it can prevent problems further down the line. We've done this before but we'll extend it a little now and show you other functions to convert.</p>
<p>First, let's do a conversion you've already done - we'll use <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> to convert <code>treatment</code> to a factor and update the labels. We'll store this in a new object named <code>demo_cleaned</code> but we will just overwrite the existing variable treatment rather than creating a new one.</p>
<div class="sourceCode" id="cb143"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demo_cleaned</span> <span class="op">&lt;-</span> <span class="va">demo_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>treatment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">treatment</span>, <span class="co"># the variable you're converting</span></span>
<span>                            levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, <span class="co"># original values</span></span>
<span>                            labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="st">"intervention"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># new labels</span></span></code></pre></div>
<p>If you now run <code>summary(demo_cleaned)</code>, you'll see that <code>treatment</code> is now coded as a factor and it helpfully tells us how many participants are in each group.</p>
<p><code>gender</code> is also a categorical variable that we might want to include in our analysis but it requires a slightly different, and simpler, approach because the values are already stored as text, R just doesn't yet know that these represent discrete categories. Instead of using <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> and updating the <code>levels</code> and <code>labels</code>, we can just use <code><a href="https://rdrr.io/r/base/factor.html">as.factor()</a></code>, which just overwrites whatever is in that column as a factor.</p>
<div class="sourceCode" id="cb144"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demo_cleaned</span> <span class="op">&lt;-</span> <span class="va">demo_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>treatment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">treatment</span>, </span>
<span>                            levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, </span>
<span>                            labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="st">"intervention"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>         gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="co"># simpler version when no need to update labels</span></span></code></pre></div>
<p>There are also similar functions for other data types. Although it won't really cause us any problems, we can convert <code>participant_ID</code>. It's currently stored as a numeric variable (because the IDs are just numbers) but really it's a character variable (it's just the same as a name).</p>
<div class="sourceCode" id="cb145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demo_cleaned</span> <span class="op">&lt;-</span> <span class="va">demo_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>treatment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">treatment</span>, </span>
<span>                            levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, </span>
<span>                            labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="st">"intervention"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>         gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span>,</span>
<span>         participant_ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">participant_ID</span><span class="op">)</span><span class="op">)</span> <span class="co"># convert to character</span></span></code></pre></div>
<ul>
<li>Now create an object named <code>q_cleaned</code> that cleans the <code>q_data</code> object by converting <code>participant_ID</code> to a character variable.</li>
</ul>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb146"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q_cleaned</span> <span class="op">&lt;-</span> <span class="va">q_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>participant_ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">participant_ID</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="activity-7-join-and-reshape-the-data" class="section level2" number="11.8">
<h2>
<span class="header-section-number">11.8</span> Activity 7: Join and reshape the data<a class="anchor" aria-label="anchor" href="#activity-7-join-and-reshape-the-data"><i class="fas fa-link"></i></a>
</h2>
<p>We can now do out first join and join together the demographic and questionnaire data so we've got a single wide-form dataset. In this code we create an object named <code>dat_wide</code> that joins together <code>demo_cleaned</code> and <code>q_cleaned</code>.</p>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat_wide</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">demo_cleaned</span>, y <span class="op">=</span> <span class="va">q_cleaned</span>, by <span class="op">=</span> <span class="st">"participant_ID"</span><span class="op">)</span> </span></code></pre></div>
<p>Once we've done that, we need to reshape it into long-form using <code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a></code>. See if you can remember how to do this using just the hints. Reshaping data is probably the hardest conceptual leap you've taken since first learning to code and it only gets easier if you try and think through the problem yourself.</p>
<ul>
<li>Name the object you're going to create <code>dat_long</code>
</li>
<li>Start with the dataset <code>join1</code>
</li>
<li>Use <code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a></code>
</li>
<li>The first column you want to pivot is named <code>bounce_back_quickly</code> and the last column is named <code>long_time_over_setbacks</code>.</li>
<li>You want to send the names of the columns to a variable called <code>item</code>
</li>
<li>You want to send the values to a variable called <code>response</code>
</li>
</ul>
<div class="webex-solution">
<button>
Hint
</button>
<div class="sourceCode" id="cb148"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">object_name</span> <span class="op">&lt;-</span> <span class="va">starting_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="va">first_var</span><span class="op">:</span><span class="va">last_var</span>, </span>
<span>               names_to <span class="op">=</span> <span class="st">"name"</span>, </span>
<span>               values_to <span class="op">=</span> <span class="st">"value"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb149"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat_long</span> <span class="op">&lt;-</span> <span class="va">dat_wide</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="va">bounce_back_quickly</span><span class="op">:</span><span class="va">long_time_over_setbacks</span>, </span>
<span>               names_to <span class="op">=</span> <span class="st">"item"</span>, </span>
<span>               values_to <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span></code></pre></div>
</div>
<p>Finally, now that we've got it all in long-form, we can join on <code>scoring</code>.</p>
<ul>
<li>Write the code to create an object named <code>dat</code> that joins <code>dat_long</code> to <code>scoring</code> by their common columns.</li>
</ul>
<div class="webex-solution">
<button>
Hint
</button>
<div class="sourceCode" id="cb150"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">object1</span>, y <span class="op">=</span> <span class="va">object2</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"commoncol1"</span>, <span class="st">"commoncol2"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb151"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">dat_long</span>, y <span class="op">=</span> <span class="va">scoring</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"item"</span>, <span class="st">"response"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="activity-8-summarise-and-visualise" class="section level2" number="11.9">
<h2>
<span class="header-section-number">11.9</span> Activity 8: Summarise and visualise<a class="anchor" aria-label="anchor" href="#activity-8-summarise-and-visualise"><i class="fas fa-link"></i></a>
</h2>
<p>Now we've got everything together we can calculate the mean scores for each participant and plot some initial findings. First, we'll create an object that calculates the mean score for each participant.</p>
<ul>
<li>Because we also want this dataset to include the demographic variables, we have to list these in <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>.</li>
<li>There's some missing data (we'll come back to this in the next chapter), so you need to add on <code>na.rm = TRUE</code> to get it to calculate the means.</li>
<li>When you use <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>, it's always safest to include <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup()</a></code> at the end at it prevents future operations you do on that dataset accidentally being grouped by variables you didn't intend.</li>
</ul>
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat_scores</span> <span class="op">&lt;-</span> <span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">participant_ID</span>, <span class="va">gender</span>, <span class="va">treatment</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>resilience_score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">score</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>## `summarise()` has grouped output by 'participant_ID', 'gender'. You can
## override using the `.groups` argument.</code></pre>
<p>Now that we've got the mean scores, we can look at group differences.For example, scores for different genders:</p>
<div class="sourceCode" id="cb154"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat_scores</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>group_score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">resilience_score</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">gender</th>
<th align="right">group_score</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">man</td>
<td align="right">3.000816</td>
</tr>
<tr class="even">
<td align="left">non-binary</td>
<td align="right">3.098810</td>
</tr>
<tr class="odd">
<td align="left">woman</td>
<td align="right">3.017898</td>
</tr>
</tbody>
</table></div>
</div>
<p>Or for the treatment conditions:</p>
<div class="sourceCode" id="cb155"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat_scores</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">treatment</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>group_score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">resilience_score</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">treatment</th>
<th align="right">group_score</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">control</td>
<td align="right">2.810133</td>
</tr>
<tr class="even">
<td align="left">intervention</td>
<td align="right">3.197737</td>
</tr>
</tbody>
</table></div>
</div>
<p>Finally, make plot the data however you want. Here's a few options you could try.</p>
<p>A violin-boxplot.</p>
<div class="inline-figure"><img src="11-resiliance1_files/figure-html/unnamed-chunk-16-1.png" width="100%" style="display: block; margin: auto;"></div>
<p>A faceted histogram.</p>
<div class="inline-figure"><img src="11-resiliance1_files/figure-html/unnamed-chunk-17-1.png" width="100%" style="display: block; margin: auto;"></div>
<p>A boxplot with raw data points, and the mean with error bars representing standard error.</p>
<p>I haven't come close to teaching you how to make this one but if you want to stretch yourself, see if you can figure it out and send me (Emily) a DM with your code. I would start with the boxplot, then try and flip it, then add in the data raw data points and the axis labels. The colours and the mean + SE will cause you the most trouble. Happy Googling :)</p>
<div class="inline-figure"><img src="11-resiliance1_files/figure-html/unnamed-chunk-18-1.png" width="100%" style="display: block; margin: auto;"></div>
</div>
<div id="finished-9" class="section level2" number="11.10">
<h2>
<span class="header-section-number">11.10</span> Finished<a class="anchor" aria-label="anchor" href="#finished-9"><i class="fas fa-link"></i></a>
</h2>
<p>Finally, try knitting the file to HTML and remember to make a note of any mistakes you made and how you fixed them or any other useful information you learned. Then save your Markdown, and quit your session on the server if applicable.</p>

</div>
</div>



</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;

    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    $(solveme[i]).after(" <span class='webex-icon'></span>");
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    $(selects[i]).after(" <span class='webex-icon'></span>");
  }

  update_total_correct();
}

</script><script>
$( document ).ready(function() {
  var cite = ' ';
  var psyteachr = ' <a href="https://psyteachr.github.io/"><img src="images/logos/psyteachr_logo.png" style="height: 31px; color: white;" alt="psyTeachR: Reproducible Research" /></a>';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    psyteachr + license + cite
  );

  // open rdrr links externally
  $("a[href^='https://rdrr.io']").click(function(){
    window.open(this.href);
    return false;
  });

  // visible second sidebar in mobile
  function move_sidebar() {
    var w = window.innerWidth;
    if (w < 992) {
      $("#toc").appendTo($("#main-nav"));
    } else {
      $("#toc").appendTo($("div.sidebar-chapter"));
    }
  }
  move_sidebar();
  window.onresize = move_sidebar;
});
</script><div class="chapter-nav">
<div class="prev"><a href="big-five-personality-2.html"><span class="header-section-number">10</span> Big five personality 2</a></div>
<div class="next"><a href="installing-r.html"><span class="header-section-number">A</span> Installing R</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#resilience-1"><span class="header-section-number">11</span> Resilience 1</a></li>
<li><a class="nav-link" href="#sec-ilo-resil1"><span class="header-section-number">11.1</span> Intended Learning Outcomes</a></li>
<li><a class="nav-link" href="#activity-1-resilience"><span class="header-section-number">11.2</span> Activity 1: Resilience</a></li>
<li><a class="nav-link" href="#sec-new-project-resil"><span class="header-section-number">11.3</span> Activity 2: New project</a></li>
<li><a class="nav-link" href="#sec-data-resil"><span class="header-section-number">11.4</span> Activity 3: Data files</a></li>
<li><a class="nav-link" href="#activity-4-loading-the-data"><span class="header-section-number">11.5</span> Activity 4: Loading the data</a></li>
<li><a class="nav-link" href="#activity-5-check-the-data"><span class="header-section-number">11.6</span> Activity 5: Check the data</a></li>
<li><a class="nav-link" href="#activity-6-convert-data-types"><span class="header-section-number">11.7</span> Activity 6: Convert data types</a></li>
<li><a class="nav-link" href="#activity-7-join-and-reshape-the-data"><span class="header-section-number">11.8</span> Activity 7: Join and reshape the data</a></li>
<li><a class="nav-link" href="#activity-8-summarise-and-visualise"><span class="header-section-number">11.9</span> Activity 8: Summarise and visualise</a></li>
<li><a class="nav-link" href="#finished-9"><span class="header-section-number">11.10</span> Finished</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/psyteachr/data-skills-v2/blob/master/book/11-resiliance1.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/psyteachr/data-skills-v2/edit/master/book/11-resiliance1.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Skills</strong>" was written by Emily Nordmann. It was last built on 2024-01-05.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
