<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 10 Big five personality 2 | Data Skills</title>
<meta name="author" content="Emily Nordmann">
<meta name="description" content="10.1 Intended Learning Outcomes By the end of this chapter you should be able to: Be able to reshape data from wide-form to long-form using pivot_longer() Be able to summarise data for different...">
<meta name="generator" content="bookdown 0.34 with bs4_book()">
<meta property="og:title" content="Chapter 10 Big five personality 2 | Data Skills">
<meta property="og:type" content="book">
<meta property="og:url" content="https://psyteachr.github.io/data-skills-v2/big-five-personality-2.html">
<meta property="og:image" content="https://psyteachr.github.io/data-skills-v2/images/logos/logo.png">
<meta property="og:description" content="10.1 Intended Learning Outcomes By the end of this chapter you should be able to: Be able to reshape data from wide-form to long-form using pivot_longer() Be able to summarise data for different...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 10 Big five personality 2 | Data Skills">
<meta name="twitter:description" content="10.1 Intended Learning Outcomes By the end of this chapter you should be able to: Be able to reshape data from wide-form to long-form using pivot_longer() Be able to summarise data for different...">
<meta name="twitter:image" content="https://psyteachr.github.io/data-skills-v2/images/logos/logo.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.0/transition.js"></script><script src="libs/bs3compat-0.5.0/tabs.js"></script><script src="libs/bs3compat-0.5.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6NP3MF25W3');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="include/psyteachr.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Data Skills</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Overview</a></li>
<li><a class="" href="sec-intro.html"><span class="header-section-number">1</span> Intro to R and RStudio</a></li>
<li><a class="" href="stroop.html"><span class="header-section-number">2</span> Stroop 1</a></li>
<li><a class="" href="stroop-2.html"><span class="header-section-number">3</span> Stroop 2</a></li>
<li><a class="" href="homework-1.html"><span class="header-section-number">4</span> Homework 1</a></li>
<li><a class="" href="corsi-blocks-1.html"><span class="header-section-number">5</span> Corsi Blocks 1</a></li>
<li><a class="" href="corsi-blocks-2.html"><span class="header-section-number">6</span> Corsi Blocks 2</a></li>
<li><a class="" href="belonging-1.html"><span class="header-section-number">7</span> Belonging 1</a></li>
<li><a class="" href="belonging-2.html"><span class="header-section-number">8</span> Belonging 2</a></li>
<li><a class="" href="big-five-personality-1.html"><span class="header-section-number">9</span> Big five personality 1</a></li>
<li><a class="active" href="big-five-personality-2.html"><span class="header-section-number">10</span> Big five personality 2</a></li>
<li><a class="" href="resilience-1.html"><span class="header-section-number">11</span> Resilience 1</a></li>
<li><a class="" href="resilience-2.html"><span class="header-section-number">12</span> Resilience 2</a></li>
<li><a class="" href="intro-to-probability.html"><span class="header-section-number">13</span> Intro to Probability</a></li>
<li><a class="" href="probability-continued.html"><span class="header-section-number">14</span> Probability continued</a></li>
<li><a class="" href="simulation.html"><span class="header-section-number">15</span> Simulation</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="installing-r.html"><span class="header-section-number">A</span> Installing R</a></li>
<li><a class="" href="symbols.html"><span class="header-section-number">B</span> Symbols</a></li>
<li><a class="" href="conventions.html"><span class="header-section-number">C</span> Conventions</a></li>
<li><a class="" href="server-troubleshooting.html"><span class="header-section-number">D</span> Server troubleshooting</a></li>
<li><a class="" href="license.html">License</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/psyteachr/data-skills-v2">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="big-five-personality-2" class="section level1" number="10">
<h1>
<span class="header-section-number">10</span> Big five personality 2<a class="anchor" aria-label="anchor" href="#big-five-personality-2"><i class="fas fa-link"></i></a>
</h1>
<div id="sec-ilo-big5-2" class="section level2" number="10.1">
<h2>
<span class="header-section-number">10.1</span> Intended Learning Outcomes<a class="anchor" aria-label="anchor" href="#sec-ilo-big5-2"><i class="fas fa-link"></i></a>
</h2>
<p>By the end of this chapter you should be able to:</p>
<ul>
<li>Be able to reshape data from wide-form to long-form using <code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a></code>
</li>
<li>Be able to summarise data for different groupings using <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>
</li>
</ul>
</div>
<div id="sec-walkthrough-big5" class="section level2" number="10.2">
<h2>
<span class="header-section-number">10.2</span> Walkthrough video<a class="anchor" aria-label="anchor" href="#sec-walkthrough-big5"><i class="fas fa-link"></i></a>
</h2>
<p>There is a walkthrough video of this chapter available via <a href="https://uofglasgow.zoom.us/rec/share/ZuwzzJ6ONY_HllcnvtM20AWUCi8sYdfa7yeliywBY70xBkzDywjBoKHksbay68uy.By054w4-f-s1UjrG?startTime=1705058397000">Zoom</a>. We recommend first trying to work through each section of the book on your own and then watching the video if you get stuck, or if you would like more information. This will feel slower than just starting with the video, but you will learn more in the long-run. Please note that there may have been minor edits to the book since the video was recorded. Where there are differences, the book should always take precedence.</p>
</div>
<div id="sec-setup-big5" class="section level2" number="10.3">
<h2>
<span class="header-section-number">10.3</span> Activity 1: Set-up<a class="anchor" aria-label="anchor" href="#sec-setup-big5"><i class="fas fa-link"></i></a>
</h2>
<p>Login to the server and then:</p>
<ul>
<li>Open your Big Five project;</li>
<li>Create a new Markdown document named "Big Five 2". Delete the default text and then create a new code chunk.</li>
<li>Your environment should be clear but if there are objects in it, remove them by pressing the brush icon.</li>
</ul>
</div>
<div id="activity-2-loading-the-data-1" class="section level2" number="10.4">
<h2>
<span class="header-section-number">10.4</span> Activity 2: Loading the data<a class="anchor" aria-label="anchor" href="#activity-2-loading-the-data-1"><i class="fas fa-link"></i></a>
</h2>
<p>In code chunk 1, write and run the code that:</p>
<ul>
<li>Loads the <code class="package">tidyverse</code>.</li>
<li>Uses <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> to load <code>big5_data.csv</code> into an object named <code>big5</code>.</li>
<li>Loads <code>scoring.csv</code> into an object named <code>scoring</code>.</li>
<li>Loads <code>code_book.csv</code> into a object named <code>codebook</code>.</li>
</ul>
<div class="webex-solution">
<button>
Hint
</button>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">package_name</span><span class="op">)</span></span>
<span><span class="va">object_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"file_name.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="va">big5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"big5_data.csv"</span><span class="op">)</span></span>
<span><span class="va">scoring</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"scoring.csv"</span><span class="op">)</span></span>
<span><span class="va">codebook</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"code_book.csv"</span><span class="op">)</span></span></code></pre></div>
<p><code>r unhide()</code></p>
</div>
<div id="activity-3-wide-form-and-long-form-data" class="section level2" number="10.5">
<h2>
<span class="header-section-number">10.5</span> Activity 3: Wide-form and long-form data<a class="anchor" aria-label="anchor" href="#activity-3-wide-form-and-long-form-data"><i class="fas fa-link"></i></a>
</h2>
<p>As noted in the last chapter, our Big Five data is currently in wide-form, with one row for each particpant that contains all the data for that one person. The below table shows a preview of the first 10 columns for the first five participants.</p>
<div class="kable-table">
<div class="inline-table"><table style="width:100%;" class="table table-sm">
<colgroup>
<col width="28%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
<col width="7%">
</colgroup>
<thead><tr class="header">
<th align="left">ResponseId</th>
<th align="right">Q4_1</th>
<th align="right">Q4_2</th>
<th align="right">Q4_3</th>
<th align="right">Q4_4</th>
<th align="right">Q4_5</th>
<th align="right">Q4_6</th>
<th align="right">Q4_7</th>
<th align="right">Q4_8</th>
<th align="right">Q4_9</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">R_3O9fzdsGn9tEeOm</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">R_12z0hyaE0u5KaRG</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">R_2VmvNkJQ6RpY3PV</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">R_eboWF1vMzPIVPi1</td>
<td align="right">4</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">R_1jBz09Q5pO9alkq</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">R_pui4ZWuxPsJ7vUt</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
</tbody>
</table></div>
</div>
<p>To join our dataset with the information we have in <code>codebook</code> and <code>scoring</code>, we need to transform this to long-form data, where there are multiple rows of data for each participant - one for each observation.</p>
<p>There are 60 questions in the Big Five personality test, so we have 60 observations for each participant. How many rows of data will we have <strong>for each participant</strong> if we transform the dataset to long-form? <input class="webex-solveme nospaces" size="2" data-answer='["60"]'></p>
<div class="webex-solution">
<button>
Explain this answer
</button>
<p>This might seem like a trick question, it's not, it's just trying to reinforce that you will have as many rows as you have bits of data for each participant. Therefore in this case, we have 60 observations, so we'll have 60 rows of data for each person.</p>
</div>
<p>The function we use for this is <code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a></code> and we briefly described it and showed how to use it in the last chapter but let's see if you can figure it out step-by-step. Create a new code chunk and then try and adapt the below code to pivot the data.</p>
<ol style="list-style-type: decimal">
<li><p><code>object_name</code> should be the name of the new object you will create. In this case, we want to call our object <code>big5_long</code>.</p></li>
<li><p><code>data</code> is the name of the starting dataset, the wide-form dataset you want to transform. This is the object that has all the Big Five data in it.</p></li>
<li><p><code>cols</code> are all the columns (variables) that you want to pivot to long-form. There will be a separate row of data for each of these columns. To specify the columns we want to pivot you can use the notation <code>first_column:last_column</code>. We want to pivot all of the columns that contain the answers to the questionnaire items.</p></li>
<li><p><code>names_to</code> specifies the name of a new column that will be created to store the column names from the original data frame (that is, the names of the items <code>Q4_1</code> through <code>Q4_60</code>). Because we want to join our new long-form dataset with our other datasets, this name should be the same name as the variable name that is used in the other datasets. Go and have a look at <code>codebook</code> and find out what the column name is called that has the questionnaire items in.</p></li>
<li><p><code>values_to</code> specifies the name of a new column that will store the values from the original data frame (that is, the responses to the items <code>Q4_1</code> through <code>Q4_60</code>). As above, we want this name to match the names in the other objects. Go and look at <code>scoring</code> and find out what the column name is called that has the response data in.</p></li>
</ol>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">object_name</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="va">first_column</span><span class="op">:</span><span class="va">last_column</span>, </span>
<span>               names_to <span class="op">=</span> <span class="st">"column_name"</span>, </span>
<span>               values_to <span class="op">=</span> <span class="st">"column_name"</span><span class="op">)</span> </span></code></pre></div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">big5_long</span> <span class="op">&lt;-</span> <span class="va">big5</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="va">Q4_1</span><span class="op">:</span><span class="va">Q4_60</span>, </span>
<span>               names_to <span class="op">=</span> <span class="st">"item"</span>, </span>
<span>               values_to <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span> </span></code></pre></div>
</div>
<div id="activity-4-inner_join" class="section level2" number="10.6">
<h2>
<span class="header-section-number">10.6</span> Activity 4: <code>inner_join()</code><a class="anchor" aria-label="anchor" href="#activity-4-inner_join"><i class="fas fa-link"></i></a>
</h2>
<p>Now that we have the data in long-form, we can join it with the other datasets. Remember that you can only join two tables together at once, so we need to do multiple joins.</p>
<p>First, let's join the new <code>big5_long</code> with <code>codebook</code> - create a new code chunk to do this in. The column that they both have in common is <code>item</code> so this is the variable we specify to join <code><a href="https://rdrr.io/r/base/by.html">by()</a></code>. This code shows a slightly different way of writing out join code. Instead of using <code>x</code> and <code>y</code>, you start with the dataset, then use the pipe <code>%&gt;%</code> and then just give the second table as an argument to <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join()</a></code></p>
<p>This can be read as "start with big5_long and then join it to codebook using the variable <code>item</code> to match the columns".</p>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">join1</span> <span class="op">&lt;-</span> <span class="va">big5_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">codebook</span>, </span>
<span>             by <span class="op">=</span> <span class="st">"item"</span><span class="op">)</span></span></code></pre></div>
<p>If you look at <code>join1</code> you can see that this object now has all the original columns of <code>big5_long</code>, but it also has all the information contained in <code>codebook</code>:</p>
<div class="kable-table">
<div class="inline-table"><table style="width:100%;" class="table table-sm">
<colgroup>
<col width="23%">
<col width="6%">
<col width="11%">
<col width="23%">
<col width="21%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="left">ResponseId</th>
<th align="left">item</th>
<th align="right">response</th>
<th align="left">trait</th>
<th align="left">facet</th>
<th align="left">direction</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">R_3O9fzdsGn9tEeOm</td>
<td align="left">Q4_1</td>
<td align="right">5</td>
<td align="left">extraversion</td>
<td align="left">sociability</td>
<td align="left">forward</td>
</tr>
<tr class="even">
<td align="left">R_3O9fzdsGn9tEeOm</td>
<td align="left">Q4_2</td>
<td align="right">4</td>
<td align="left">agreeableness</td>
<td align="left">compassion</td>
<td align="left">forward</td>
</tr>
<tr class="odd">
<td align="left">R_3O9fzdsGn9tEeOm</td>
<td align="left">Q4_3</td>
<td align="right">1</td>
<td align="left">conscientiousness</td>
<td align="left">organisation</td>
<td align="left">reversed</td>
</tr>
<tr class="even">
<td align="left">R_3O9fzdsGn9tEeOm</td>
<td align="left">Q4_4</td>
<td align="right">1</td>
<td align="left">neg_emotionality</td>
<td align="left">anxiety</td>
<td align="left">reversed</td>
</tr>
<tr class="odd">
<td align="left">R_3O9fzdsGn9tEeOm</td>
<td align="left">Q4_5</td>
<td align="right">5</td>
<td align="left">open_minded</td>
<td align="left">aes_sensitivity</td>
<td align="left">reversed</td>
</tr>
<tr class="even">
<td align="left">R_3O9fzdsGn9tEeOm</td>
<td align="left">Q4_6</td>
<td align="right">3</td>
<td align="left">extraversion</td>
<td align="left">assertiveness</td>
<td align="left">forward</td>
</tr>
</tbody>
</table></div>
</div>
<p>We also want to add in the information that is in <code>scoring</code>. First, look at the variables in <code>join1</code> and <code>scoring</code>. If you join these together, how many variables will be in the resulting dataset?<input class="webex-solveme nospaces" size="1" data-answer='["7"]'></p>
<div class="webex-solution">
<button>
Explain this answer
</button>
<p>There are 6 variables in <code>join1</code>, <code>ResponseId</code>, <code>item</code>, <code>response</code>, <code>trait</code>, <code>facet</code>, and <code>direction</code>.</p>
<p><code>scoring</code> has 3 variables, <code>direction</code>, <code>response</code>, and <code>score</code>.</p>
<p>When you join the two, the new dataset will have all of the unique columns. <code>join1</code> already has <code>direction</code> and <code>response</code> so the only addition will be <code>score</code> taking the number of columns from 6 to 7.</p>
</div>
<ul>
<li>Create a new object named <code>join2</code> that starts with <code>join1</code> and then joins it to <code>scoring</code> by the two columns they have in common. Remember that if you need to specify multiple variables, you need to use <code><a href="https://rdrr.io/r/base/c.html">c()</a></code>.</li>
</ul>
<div class="webex-solution">
<button>
Hint
</button>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="big-five-personality-2.html#cb127-1" tabindex="-1"></a>join2 <span class="ot">&lt;-</span> starting_data<span class="sc">%&gt;%</span></span>
<span id="cb127-2"><a href="big-five-personality-2.html#cb127-2" tabindex="-1"></a>  <span class="fu">inner_join</span>(object_to_join, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"common_column1"</span>, <span class="st">"common_column2"</span>))<span class="st">`</span></span></code></pre></div>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">join2</span> <span class="op">&lt;-</span> <span class="va">join1</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">scoring</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"response"</span>, <span class="st">"direction"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="actvity-5-pipe-it" class="section level2" number="10.7">
<h2>
<span class="header-section-number">10.7</span> Actvity 5: Pipe it<a class="anchor" aria-label="anchor" href="#actvity-5-pipe-it"><i class="fas fa-link"></i></a>
</h2>
<p>The above two joins are a really good example of where pipes come in very useful. We don't need <code>join1</code>, it's just partial step on the way to <code>join2</code> and the problem is that the more objects we create and have in our environment, the more likely we are to accidentally use the wrong one.</p>
<ul>
<li>Create a new code chunk and then write the code to create an object named <code>full_dat</code> that starts with <code>big5_long</code>, and then joins it to <code>codebook</code>, and then joins it to <code>scoring</code> using the pipe <code>%&gt;%</code>.</li>
</ul>
<div class="webex-solution">
<button>
Hint
</button>
<div class="sourceCode" id="cb129"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">object_name</span> <span class="op">&lt;-</span> <span class="va">starting_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">inner_join1</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">inner_join2</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">full_dat</span> <span class="op">&lt;-</span> <span class="va">big5_long</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">codebook</span>, by <span class="op">=</span> <span class="st">"item"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">scoring</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"response"</span>, <span class="st">"direction"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="activity-6-describe-and-visualise" class="section level2" number="10.8">
<h2>
<span class="header-section-number">10.8</span> Activity 6: Describe and visualise<a class="anchor" aria-label="anchor" href="#activity-6-describe-and-visualise"><i class="fas fa-link"></i></a>
</h2>
<p>Now we have everything we need all in one place.</p>
<p>First, let's look at the mean scores for each trait (openness, conscientiousness, extraversion, agreeableness, neuroticism). The score for each trait for each participant is calculated by taking the average of their responses to 12 items.</p>
<p><code>full_dat</code> contains the raw scores to each item, so a first step, we want to create a new object that calculates the mean score for each participant (<code>ResponseId</code>) for each <code>trait</code>. We can do this by using functions we have used before: <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>. Because we want scores by two variables (each participant and each trait), <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> has two variables passed to it:</p>
<div class="sourceCode" id="cb131"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trait_scores</span> <span class="op">&lt;-</span> <span class="va">full_dat</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">ResponseId</span>, <span class="va">trait</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>ppt_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">score</span><span class="op">)</span>,</span>
<span>            ppt_sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">score</span><span class="op">)</span>,</span>
<span>            n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<p>We can see that <code>trait_scores</code> has the average score on each trait for each participant:</p>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">ResponseId</th>
<th align="left">trait</th>
<th align="right">ppt_mean</th>
<th align="right">ppt_sd</th>
<th align="right">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">R_00WKbbVigS4o2nD</td>
<td align="left">agreeableness</td>
<td align="right">3.916667</td>
<td align="right">1.0836247</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">R_00WKbbVigS4o2nD</td>
<td align="left">conscientiousness</td>
<td align="right">3.333333</td>
<td align="right">1.0730867</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">R_00WKbbVigS4o2nD</td>
<td align="left">extraversion</td>
<td align="right">2.500000</td>
<td align="right">1.9306146</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">R_00WKbbVigS4o2nD</td>
<td align="left">neg_emotionality</td>
<td align="right">3.666667</td>
<td align="right">1.3026779</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">R_00WKbbVigS4o2nD</td>
<td align="left">open_minded</td>
<td align="right">4.833333</td>
<td align="right">0.5773503</td>
<td align="right">12</td>
</tr>
</tbody>
</table></div>
</div>
<p>In the above table, which trait does this participant have the lowest score on? <select class="webex-select"><option value="blank"></option>
<option value="">agreeableness</option>
<option value="">conscientiousness</option>
<option value="answer">extraversion</option>
<option value="">neg_emotionality</option>
<option value="">open_minded</option></select></p>
<div class="webex-solution">
<button>
Explain this answer
</button>
<p>This participant's average extraversion score was 2.5 which is lower than the scores on the other traits.</p>
</div>
<p>Now, make a boxplot of the scores for each trait. See if you can do this from memory:</p>
<ul>
<li>Use the function <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code>
</li>
<li>The first line sets up the <code>data</code> and the aesthetic mapping (<code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>)</li>
<li>
<code>x</code> should be the <code>trait</code>
</li>
<li>
<code>y</code> should be the <code>mean_score</code>
</li>
<li>The geom should be <code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot()</a></code>
</li>
<li>You can adjust the <code>width</code> and <code>fill</code> of the bars if you want, although it's not necessary.</li>
</ul>
<div class="webex-solution">
<button>
Basic solution
</button>
<div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">trait_scores</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">trait</span>, y <span class="op">=</span> <span class="va">ppt_mean</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="10-big5-tidy_files/figure-html/unnamed-chunk-15-1.png" width="100%" style="display: block; margin: auto;"></div>
</div>
<div class="webex-solution">
<button>
Fancy solution
</button>
<p>This code introduces a lot of visual tweaks - try deleting each line of code or changing the values to figure out what each bit does.</p>
<div class="sourceCode" id="cb133"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">trait_scores</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">trait</span>, y <span class="op">=</span> <span class="va">ppt_mean</span>, fill <span class="op">=</span> <span class="va">trait</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Mean Big Five scores by trait"</span>,</span>
<span>       x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Mean score (1-5)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Agreeableness"</span>, </span>
<span>                              <span class="st">"Conscientiousness"</span>,</span>
<span>                              <span class="st">"Extraversion"</span>,</span>
<span>                              <span class="st">"Neuroticism"</span>,</span>
<span>                              <span class="st">"Openess"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_fill_viridis_d</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"D"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="10-big5-tidy_files/figure-html/unnamed-chunk-16-1.png" width="100%" style="display: block; margin: auto;"></div>
</div>
<p>Which trait has the lowest median score? <select class="webex-select"><option value="blank"></option>
<option value="">agreeablness</option>
<option value="">conscientiousness</option>
<option value="answer">extraversion</option>
<option value="">neuroticism</option>
<option value="">openness</option></select></p>
<p>Which trait has the highest median score? <select class="webex-select"><option value="blank"></option>
<option value="">agreeablness</option>
<option value="">conscientiousness</option>
<option value="">extraversion</option>
<option value="">neuroticism</option>
<option value="answer">openness</option></select></p>
<p>You can also create a table of the mean scores for each trait, collapsing across participant by removing <code>ResponseId</code> from <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>:</p>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">trait_means</span> <span class="op">&lt;-</span> <span class="va">trait_scores</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">trait</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>trait_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ppt_mean</span><span class="op">)</span>,</span>
<span>            trait_sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">ppt_mean</span><span class="op">)</span>,</span>
<span>            n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">trait</th>
<th align="right">trait_mean</th>
<th align="right">trait_sd</th>
<th align="right">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">agreeableness</td>
<td align="right">3.666459</td>
<td align="right">0.6165711</td>
<td align="right">5605</td>
</tr>
<tr class="even">
<td align="left">conscientiousness</td>
<td align="right">3.253494</td>
<td align="right">0.7608749</td>
<td align="right">5605</td>
</tr>
<tr class="odd">
<td align="left">extraversion</td>
<td align="right">3.134121</td>
<td align="right">0.7838352</td>
<td align="right">5605</td>
</tr>
<tr class="even">
<td align="left">neg_emotionality</td>
<td align="right">3.301784</td>
<td align="right">0.8500805</td>
<td align="right">5605</td>
</tr>
<tr class="odd">
<td align="left">open_minded</td>
<td align="right">3.775379</td>
<td align="right">0.6470955</td>
<td align="right">5605</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="activity-7-add-a-filter" class="section level2" number="10.9">
<h2>
<span class="header-section-number">10.9</span> Activity 7: Add a filter<a class="anchor" aria-label="anchor" href="#activity-7-add-a-filter"><i class="fas fa-link"></i></a>
</h2>
<p>Each personality trait is made up of a number of different facets. For example, of the 12 extraversion items, three measure sociability, three measure assertiveness, and three measure energy. The information about which item measures each facet was originally contained in <code>codebook</code> and is in the variable <code>facet</code>.</p>
<ul>
<li>Create a new code chunk and then create an object named <code>extra_data</code> that just contains the extraversion items. You will need to start with the object <code>full_dat</code> and use <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> to do this.</li>
</ul>
<div class="webex-solution">
<button>
Hint
</button>
<div class="sourceCode" id="cb135"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">object_name</span> <span class="op">&lt;-</span> <span class="va">starting_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">trait</span> <span class="op">==</span> <span class="st">"value"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb136"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">extra_data</span> <span class="op">&lt;-</span> <span class="va">full_dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">trait</span> <span class="op">==</span> <span class="st">"extraversion"</span><span class="op">)</span></span></code></pre></div>
</div>
<p>Then create an object named <code>facet_scores</code> and calculate the mean facet scores for each participant using <code>extra_data</code>. You can adapt the <code>group_by</code> and <code>summarise</code> code you used above, just change the data and variable names.</p>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb137"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">facet_scores</span> <span class="op">&lt;-</span> <span class="va">extra_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">ResponseId</span>, <span class="va">facet</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>ppt_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">score</span><span class="op">)</span>,</span>
<span>            ppt_sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">score</span><span class="op">)</span>,</span>
<span>            n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<pre><code>## `summarise()` has grouped output by 'ResponseId'. You can override using the
## `.groups` argument.</code></pre>
</div>
<p>Next, make a boxplot for each facet - again you can adapt the code you used in the previous example. The basic version should look like this:</p>
<div class="inline-figure"><img src="10-big5-tidy_files/figure-html/unnamed-chunk-22-1.png" width="100%" style="display: block; margin: auto;"></div>
<p>Finally, create a table that has the mean facet scores for each facet of extraversion. This object should be named <code>facet_means</code> and have four columns <code>facet</code>, <code>facet_mean</code>, <code>facet_sd</code>, and <code>n</code>.</p>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb139"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">facet_means</span> <span class="op">&lt;-</span> <span class="va">facet_scores</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">facet</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>facet_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ppt_mean</span><span class="op">)</span>,</span>
<span>            facet_sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">ppt_mean</span><span class="op">)</span>,</span>
<span>            n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
</div>
<p>The resulting table should look like this:</p>
<div class="sourceCode" id="cb140"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">facet_means</span></span></code></pre></div>
<div class="kable-table">
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">facet</th>
<th align="right">facet_mean</th>
<th align="right">facet_sd</th>
<th align="right">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">assertiveness</td>
<td align="right">3.014451</td>
<td align="right">0.9399298</td>
<td align="right">5605</td>
</tr>
<tr class="even">
<td align="left">energy</td>
<td align="right">3.399777</td>
<td align="right">0.8608341</td>
<td align="right">5605</td>
</tr>
<tr class="odd">
<td align="left">sociability</td>
<td align="right">2.988136</td>
<td align="right">1.0608567</td>
<td align="right">5605</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="finished-8" class="section level2" number="10.10">
<h2>
<span class="header-section-number">10.10</span> Finished<a class="anchor" aria-label="anchor" href="#finished-8"><i class="fas fa-link"></i></a>
</h2>
<p>Finally, try knitting the file to HTML and remember to make a note of any mistakes you made and how you fixed them or any other useful information you learned. Then save your Markdown, and quit your session on the server.</p>

</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;

    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    $(solveme[i]).after(" <span class='webex-icon'></span>");
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    $(selects[i]).after(" <span class='webex-icon'></span>");
  }

  update_total_correct();
}

</script><script>
$( document ).ready(function() {
  var cite = ' ';
  var psyteachr = ' <a href="https://psyteachr.github.io/"><img src="images/logos/psyteachr_logo.png" style="height: 31px; color: white;" alt="psyTeachR: Reproducible Research" /></a>';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    psyteachr + license + cite
  );

  // open rdrr links externally
  $("a[href^='https://rdrr.io']").click(function(){
    window.open(this.href);
    return false;
  });

  // visible second sidebar in mobile
  function move_sidebar() {
    var w = window.innerWidth;
    if (w < 992) {
      $("#toc").appendTo($("#main-nav"));
    } else {
      $("#toc").appendTo($("div.sidebar-chapter"));
    }
  }
  move_sidebar();
  window.onresize = move_sidebar;
});
</script>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Skills</strong>" was written by Emily Nordmann. It was last built on 2024-01-22.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script><div class="chapter-nav">
<div class="prev"><a href="big-five-personality-1.html"><span class="header-section-number">9</span> Big five personality 1</a></div>
<div class="next"><a href="resilience-1.html"><span class="header-section-number">11</span> Resilience 1</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#big-five-personality-2"><span class="header-section-number">10</span> Big five personality 2</a></li>
<li><a class="nav-link" href="#sec-ilo-big5-2"><span class="header-section-number">10.1</span> Intended Learning Outcomes</a></li>
<li><a class="nav-link" href="#sec-walkthrough-big5"><span class="header-section-number">10.2</span> Walkthrough video</a></li>
<li><a class="nav-link" href="#sec-setup-big5"><span class="header-section-number">10.3</span> Activity 1: Set-up</a></li>
<li><a class="nav-link" href="#activity-2-loading-the-data-1"><span class="header-section-number">10.4</span> Activity 2: Loading the data</a></li>
<li><a class="nav-link" href="#activity-3-wide-form-and-long-form-data"><span class="header-section-number">10.5</span> Activity 3: Wide-form and long-form data</a></li>
<li><a class="nav-link" href="#activity-4-inner_join"><span class="header-section-number">10.6</span> Activity 4: inner_join()</a></li>
<li><a class="nav-link" href="#actvity-5-pipe-it"><span class="header-section-number">10.7</span> Actvity 5: Pipe it</a></li>
<li><a class="nav-link" href="#activity-6-describe-and-visualise"><span class="header-section-number">10.8</span> Activity 6: Describe and visualise</a></li>
<li><a class="nav-link" href="#activity-7-add-a-filter"><span class="header-section-number">10.9</span> Activity 7: Add a filter</a></li>
<li><a class="nav-link" href="#finished-8"><span class="header-section-number">10.10</span> Finished</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/psyteachr/data-skills-v2/blob/master/book/10-big5-tidy.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/psyteachr/data-skills-v2/edit/master/book/10-big5-tidy.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>
</div>
</div>
</body>
</html>
